# 用户故事与验收标准

> 目的：将 PRD 的功能需求（FR）拆解为可交付的用户故事（US），并提供可验证的验收标准（AC），用于排期、开发与验收。

## 编写约定
- 用户故事：作为一名 <角色>，我希望 <目标>，从而 <价值>。
- 验收标准（AC）：可验证、尽量可自动化，覆盖正常/异常路径。
- 元信息：优先级（P0/P1/P2）、估算（点数）、依赖、对应 FR。
- DoR：需求澄清、UI/交互就绪、接口契约可用、数据准备清晰。
- DoD：代码合并、测试通过、文档齐备、监控/埋点到位。

---

## 史诗：世界管理（FR-0.5）

### US-001 创建世界（FR-0.5.1）
- 作为 登入用户，我希望 新建“世界”，从而 开始组织我的创作。
AC
- 输入名称（必填）与描述（选填）后可保存并返回详情页。
- 名称为空阻止保存并提示错误信息。
- 成功后在仪表盘可见该世界卡片。
元
- 优先级：P0｜估算：3｜依赖：无

### US-002 列出我的世界（FR-0.5.2）
- 作为 登入用户，我希望 查看我拥有/协作的世界列表，从而 快速进入工作。
AC
- 列表显示名称、描述、角色（Owner/Editor/Viewer）。
- 支持按更新时间排序。
元
- 优先级：P0｜估算：2｜依赖：US-001

### US-003 编辑世界元数据（FR-0.5.3）
- 作为 世界所有者，我希望 编辑名称/描述/可见性，从而 维持信息准确。
AC
- 可修改名称/描述/公开-私密；权限不足时被拒绝并提示。
元
- 优先级：P1｜估算：3｜依赖：US-001，US-702（权限）

### US-004 删除世界（FR-0.5.4）
- 作为 世界所有者，我希望 删除世界，从而 清理不需要的项目。
AC
- 需要二次确认；删除后该世界及其内容不可见。
- 非所有者无法删除。
元
- 优先级：P1｜估算：3｜依赖：US-001，US-702（权限）

---

## 史诗：编辑器与链接（FR-1.0）

### US-101 基于块的富文本编辑（FR-1.1）
- 作为 创作者，我希望 使用块级所见即所得编辑，从而 高效编排内容。
AC
- 支持段落/标题/列表/引用/代码块等基础块。
- 编辑内容自动保存，刷新后不丢失。
元
- 优先级：P0｜估算：5｜依赖：无

### US-103 斜杠命令插入（FR-1.3）
- 作为 创作者，我希望 通过“/”快速插入块或对象，从而 提升编辑效率。
AC
- 输入“/”弹出可筛选菜单；上下键选择并回车插入。
- 常用项置顶；无结果时给予提示。
元
- 优先级：P1｜估算：3｜依赖：US-101

### US-104 提及元素创建双向链接（FR-1.4）
- 作为 创作者，我希望 通过“@”在当前世界内提及元素，从而 建立双向链接。
AC
- 输入“@”可搜索当前世界元素并插入链接标签。
- 链接在源与目标页面均可见；点击可跳转。
元
- 优先级：P0｜估算：5｜依赖：US-101，US-001

### US-105 块引用与嵌入（FR-1.5）
- 作为 创作者，我希望 (( 引用其他元素中的块，从而 复用内容并保持同步。
AC
- 使用 (( 搜索并选择块后嵌入；源块更新后嵌入处同步更新。
- 无访问权限时嵌入位置给出可见性提示。
元
- 优先级：P1｜估算：5｜依赖：US-101，US-104，US-702

---

## 史诗：元素模板（FR-2.0）

### US-201 创建元素模板（FR-2.1）
- 作为 世界所有者，我希望 定义并保存元素模板，从而 复用结构化属性。
AC
- 可配置字段类型（文本/数字/日期/关系）。
- 模板仅在所属世界可见与使用。
元
- 优先级：P1｜估算：5｜依赖：US-001

### US-202 应用模板创建元素（FR-2.2）
- 作为 创作者，我希望 选择模板创建元素，从而 快速标准化内容。
AC
- 创建时可选择模板并自动生成属性表单。
- 保存后元素页展示主内容区与属性区。
元
- 优先级：P1｜估算：3｜依赖：US-201

---

## 史诗：地图（Atlas）（FR-3.0）

### US-301 上传地图（FR-3.1）
- 作为 世界所有者，我希望 上传最大100MB的地图图片，从而 在地图上组织世界。
AC
- 超过大小/不支持格式时阻止并提示。
- 上传成功后可预览并命名。
元
- 优先级：P1｜估算：5｜依赖：对象存储/上传能力

### US-302 放置图钉并关联元素（FR-3.3）
- 作为 创作者，我希望 在地图上放置图钉并关联到元素，从而 建立空间索引。
AC
- 点击地图可添加图钉；选择元素建立关联；点击图钉可跳转。
- 权限不足时不可编辑图钉。
元
- 优先级：P1｜估算：5｜依赖：US-301，US-001

---

## 史诗：关系图谱（FR-5.0）

### US-501 自动生成关系图谱（FR-5.1）
- 作为 创作者，我希望 基于关系属性生成交互式图谱，从而 全局理解关系网络。
AC
- 根据已定义关系生成力导向图；点击节点可跳转元素。
- 至少支持按关系类型筛选（与 US-502 关联）。
元
- 优先级：P1｜估算：8｜依赖：元素/关系模型

---

## 史诗：协作与权限（FR-7.1/7.2）

### US-702 世界级权限（FR-7.2.1）
- 作为 所有者，我希望 设置世界的角色（Owner/Editor/Commenter/Viewer），从而 控制访问。
AC
- 不同角色在编辑/评论/查看上的权限受控；越权操作被拒绝并提示。
元
- 优先级：P0｜估算：8｜依赖：鉴权/授权基础

### US-704 公开只读链接（FR-7.2.3）
- 作为 所有者，我希望 生成公开只读链接，从而 分享我的世界内容。
AC
- 访问公开链接无需登录，仅可浏览；可随时撤销链接。
元
- 优先级：P1｜估算：5｜依赖：US-702

---

## 史诗：引导与导出（FR-8.0/9.0）

### US-801 交互式引导（FR-8.1/8.3）
- 作为 新用户，我希望 在首次进入时获得引导清单，从而 快速达到“啊哈”时刻。
AC
- 引导任务包含：创建世界、创建元素并建立一次链接、查看图谱。
- 进度可见且可跳过。
元
- 优先级：P2｜估算：5｜依赖：US-001，US-104

### US-902 导出世界数据（FR-9.3）
- 作为 创作者，我希望 导出整个世界为结构化 ZIP（Markdown/HTML/JSON），从而 保持数据主权。
AC
- 导出包含元素内容与关系；含 README 与结构说明；大于阈值时支持异步导出。
元
- 优先级：P1｜估算：8｜依赖：数据模型稳定

---

## MVP 建议优先级（P0）
- US-001 创建世界｜US-002 列表
- US-101 编辑基础｜US-104 提及链接
- US-702 世界级权限
- （可选）US-902 导出（若数据主权是首要卖点）

